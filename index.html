<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IVS Scaling â€” Real Data vs Reference Standards</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,400;0,500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- React + Recharts via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
  <script src="https://unpkg.com/recharts@2.8.0/umd/Recharts.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:       #0d1117;
      --surface:  #161b22;
      --border:   #30363d;
      --text:     #e6edf3;
      --muted:    #7d8590;
      --male:     #58a6ff;
      --female:   #ff7b72;
      --mesa:     #ffa657;
      --shiwani:  #3fb950;
      --hcm:      #bc8cff;
    }

    body {
      font-family: "DM Sans", sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 32px 24px 56px;
    }

    #root { max-width: 1080px; margin: 0 auto; }

    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 60vh;
      font-family: "DM Mono", monospace;
      color: var(--muted);
      font-size: 14px;
      gap: 10px;
    }

    .spinner {
      width: 18px; height: 18px;
      border: 2px solid var(--border);
      border-top-color: var(--shiwani);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div id="root"><div class="loading"><div class="spinner"></div>Loading PHN dataâ€¦</div></div>

<script type="text/babel">
const { useState, useEffect, useMemo, useCallback } = React;
const Recharts = window.Recharts;
const {
  ScatterChart, LineChart, Line,
  ComposedChart, XAxis, YAxis, CartesianGrid,
  Tooltip, Legend, ReferenceLine, ResponsiveContainer
} = Recharts;

// â”€â”€ Color palette â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const C = {
  male:    "#58a6ff",
  female:  "#ff7b72",
  mesa:    "#ffa657",
  shiwani: "#3fb950",
  hcm:     "#bc8cff",
  muted:   "#7d8590",
  border:  "#30363d",
  surface: "#161b22",
  text:    "#e6edf3",
};

// â”€â”€ Shared BSA grid + all reference lines merged into one dataset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Single array means tooltip cursor always finds a point in every active series.
// Shiwani is only defined for BSA â‰¥ 1.07; values outside that range are null.

// Shiwani lookup table (interpolate between known points)
const SHIWANI_RAW = [
  { bsa:1.07, mUln:11.9, fUln:10.5, mMean:9.0,  fMean:7.7  },
  { bsa:1.14, mUln:11.9, fUln:10.5, mMean:9.0,  fMean:7.7  },
  { bsa:1.21, mUln:11.9, fUln:10.5, mMean:9.0,  fMean:7.7  },
  { bsa:1.28, mUln:12.1, fUln:10.8, mMean:9.3,  fMean:7.9  },
  { bsa:1.35, mUln:12.3, fUln:11.0, mMean:9.5,  fMean:8.2  },
  { bsa:1.43, mUln:12.6, fUln:11.3, mMean:9.8,  fMean:8.4  },
  { bsa:1.50, mUln:12.8, fUln:11.5, mMean:10.0, fMean:8.7  },
  { bsa:1.58, mUln:13.0, fUln:11.7, mMean:10.2, fMean:8.9  },
  { bsa:1.65, mUln:13.2, fUln:11.9, mMean:10.4, fMean:9.1  },
  { bsa:1.72, mUln:13.4, fUln:12.0, mMean:10.6, fMean:9.2  },
  { bsa:1.81, mUln:13.6, fUln:12.3, mMean:10.8, fMean:9.5  },
  { bsa:1.89, mUln:13.9, fUln:12.6, mMean:11.1, fMean:9.8  },
  { bsa:1.94, mUln:14.1, fUln:12.8, mMean:11.3, fMean:10.0 },
  { bsa:1.97, mUln:14.2, fUln:12.9, mMean:11.4, fMean:10.1 },
  { bsa:2.06, mUln:14.6, fUln:13.2, mMean:11.7, fMean:10.4 },
  { bsa:2.14, mUln:15.0, fUln:13.7, mMean:12.2, fMean:10.8 },
  { bsa:2.22, mUln:15.3, fUln:14.0, mMean:12.4, fMean:11.1 },
  { bsa:2.31, mUln:15.5, fUln:14.2, mMean:12.7, fMean:11.4 },
  { bsa:2.40, mUln:15.7, fUln:14.4, mMean:12.9, fMean:11.6 },
  { bsa:2.49, mUln:15.9, fUln:14.6, mMean:13.1, fMean:11.8 },
  { bsa:2.57, mUln:16.0, fUln:14.7, mMean:13.1, fMean:11.8 },
  { bsa:2.66, mUln:16.0, fUln:14.7, mMean:13.1, fMean:11.8 },
];

function shiwaniInterp(bsa) {
  if (bsa < 1.07) return { mUln: null, fUln: null, mMean: null, fMean: null };
  const last = SHIWANI_RAW[SHIWANI_RAW.length - 1];
  if (bsa >= last.bsa) return { mUln: last.mUln, fUln: last.fUln, mMean: last.mMean, fMean: last.fMean };
  const hi = SHIWANI_RAW.find(r => r.bsa >= bsa);
  const lo = SHIWANI_RAW.slice().reverse().find(r => r.bsa <= bsa);
  if (!lo || lo.bsa === hi.bsa) return hi;
  const t = (bsa - lo.bsa) / (hi.bsa - lo.bsa);
  return {
    mUln:  +(lo.mUln  + t * (hi.mUln  - lo.mUln )).toFixed(2),
    fUln:  +(lo.fUln  + t * (hi.fUln  - lo.fUln )).toFixed(2),
    mMean: +(lo.mMean + t * (hi.mMean - lo.mMean)).toFixed(2),
    fMean: +(lo.fMean + t * (hi.fMean - lo.fMean)).toFixed(2),
  };
}

// Build unified grid: 80 points, BSA 0.10 â†’ 2.80
const REF_DATA = Array.from({ length: 80 }, (_, i) => {
  const bsa = +(0.10 + (i / 79) * 2.70).toFixed(3);
  const s = shiwaniInterp(bsa);
  return {
    bsa,
    mesaMale:   +(8.3 * bsa).toFixed(2),
    mesaFemale: +(8.6 * bsa).toFixed(2),
    ...s,
  };
});

// â”€â”€ Toggle button component â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function ToggleBtn({ label, on, onClick, colorKey, lineStyle = "dot" }) {
  const colors = {
    male:    C.male,    female: C.female,
    mesa:    C.mesa,    shiwani: C.shiwani,  hcm: C.hcm,
  };
  const col = colors[colorKey] || C.muted;

  const baseStyle = {
    display: "inline-flex", alignItems: "center", gap: 7,
    padding: "5px 13px", borderRadius: 20,
    border: `1.5px solid ${on ? col : C.border}`,
    cursor: "pointer",
    fontFamily: "'DM Sans', sans-serif",
    fontSize: 12, fontWeight: 500,
    background: on ? `${col}20` : "transparent",
    color: on ? col : C.muted,
    transition: "all 0.15s ease",
  };

  const Swatch = () => {
    if (lineStyle === "dot") {
      return <span style={{ width: 8, height: 8, borderRadius: "50%", background: col, flexShrink: 0 }} />;
    }
    if (lineStyle === "solid") {
      return <span style={{ width: 14, height: 2.5, background: col, borderRadius: 1, flexShrink: 0 }} />;
    }
    if (lineStyle === "dashed") {
      return (
        <span style={{ width: 16, flexShrink: 0, display: "inline-flex", gap: 2 }}>
          {[0,1,2].map(i => <span key={i} style={{ flex: 1, height: 2, background: col, borderRadius: 1 }} />)}
        </span>
      );
    }
    return null;
  };

  return (
    <button style={baseStyle} onClick={onClick}>
      <Swatch />
      {label}
    </button>
  );
}

// â”€â”€ Custom tooltip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Only show reference line values â€” PHN scatter points excluded
const PHN_NAMES = new Set(["PHN Male", "PHN Female"]);

function CustomTooltip({ active, payload }) {
  if (!active || !payload || payload.length === 0) return null;
  const refLines = payload.filter(p => !PHN_NAMES.has(p.name));
  if (refLines.length === 0) return null;
  return (
    <div style={{
      background: C.surface, border: `1px solid ${C.border}`,
      borderRadius: 8, padding: "10px 14px",
      fontFamily: "'DM Mono', monospace", fontSize: 12,
      boxShadow: "0 4px 16px rgba(0,0,0,0.4)"
    }}>
      {refLines.map((p, i) => (
        <div key={i} style={{ color: p.color || p.stroke || C.text, padding: "1px 0" }}>
          {p.name}: <strong>{typeof p.value === "number" ? p.value.toFixed(1) : p.value}</strong> mm
        </div>
      ))}
    </div>
  );
}

// â”€â”€ Main App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function App({ data }) {
  const [show, setShow] = useState({
    male:              true,
    female:            true,
    mesaMale:          true,
    mesaFemale:        true,
    shiwaniMaleUln:    true,
    shiwaniFemaleUln:  true,
    shiwaniMean:       false,
    hcm:               true,
  });

  const toggle = key => setShow(s => ({ ...s, [key]: !s[key] }));

  // BSA-weighted downsample: keep all points above BSA threshold,
  // thin the dense low-BSA cluster where visual saturation adds nothing.
  // Target ~1500 per sex total.
  function bsaWeightedSample(pts, target = 1500, fullAbove = 1.2) {
    if (pts.length <= target) return pts;
    const high = pts.filter(p => p.bsa >= fullAbove);
    const low  = pts.filter(p => p.bsa <  fullAbove);
    const lowTarget = Math.max(target - high.length, 0);
    const step = Math.ceil(low.length / lowTarget);
    const sampledLow = low.filter((_, i) => i % step === 0);
    return [...sampledLow, ...high];
  }

  const males   = useMemo(() => bsaWeightedSample(data.males),   [data.males]);
  const females = useMemo(() => bsaWeightedSample(data.females), [data.females]);

  const meta = data.meta || {};

  return (
    <div>
      {/* â”€â”€ Header â”€â”€ */}
      <div style={{ marginBottom: 24 }}>
        <div style={{
          fontFamily: "'DM Mono', monospace", fontSize: 10, fontWeight: 500,
          letterSpacing: "1.2px", textTransform: "uppercase",
          color: C.shiwani, marginBottom: 8
        }}>
          Indexing for the Precision Medicine Era
        </div>
        <h1 style={{ fontSize: 22, fontWeight: 600, letterSpacing: "-0.4px", lineHeight: 1.3 }}>
          IVS Thickness â€” Data vs Adult Reference Standards
        </h1>
        <p style={{
          fontSize: 12, color: C.muted, marginTop: 6,
          fontFamily: "'DM Mono', monospace", lineHeight: 1.7
        }}>
          N={meta.n_male + meta.n_female} subjects (â™‚ {meta.n_male} Â· â™€ {meta.n_female}) Â·
          real PHN BSA values Â· IVS sampled via Z ~ N(0,1) Â· Î±=0.40 Â· mean=5.8mm Â· SD=0.9mm
        </p>
      </div>

      {/* â”€â”€ Controls â”€â”€ */}
      <div style={{
        background: C.surface, border: `1px solid ${C.border}`,
        borderRadius: 12, padding: "18px 22px", marginBottom: 14,
        display: "flex", flexWrap: "wrap", gap: 24, alignItems: "flex-start"
      }}>
        {/* PHN Scatter */}
        <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
          <div style={{ fontSize: 9.5, fontWeight: 600, textTransform: "uppercase",
            letterSpacing: "1px", color: C.muted, fontFamily: "'DM Mono', monospace" }}>
            PHN Scatter
          </div>
          <div style={{ display: "flex", gap: 6 }}>
            <ToggleBtn label="Male"   on={show.male}   onClick={() => toggle("male")}   colorKey="male"   lineStyle="dot" />
            <ToggleBtn label="Female" on={show.female} onClick={() => toggle("female")} colorKey="female" lineStyle="dot" />
          </div>
        </div>

        {/* MESA */}
        <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
          <div style={{ fontSize: 9.5, fontWeight: 600, textTransform: "uppercase",
            letterSpacing: "1px", color: C.muted, fontFamily: "'DM Mono', monospace" }}>
            MESA Ratiometric ULN
          </div>
          <div style={{ display: "flex", gap: 6 }}>
            <ToggleBtn label="â™‚ ULN (8.3Ã—BSA)" on={show.mesaMale}   onClick={() => toggle("mesaMale")}   colorKey="mesa" lineStyle="solid" />
            <ToggleBtn label="â™€ ULN (8.6Ã—BSA)" on={show.mesaFemale} onClick={() => toggle("mesaFemale")} colorKey="mesa" lineStyle="dashed" />
          </div>
        </div>

        {/* Shiwani */}
        <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
          <div style={{ fontSize: 9.5, fontWeight: 600, textTransform: "uppercase",
            letterSpacing: "1px", color: C.muted, fontFamily: "'DM Mono', monospace" }}>
            Shiwani GAMM Â· age 55 Â· BMI 24
          </div>
          <div style={{ display: "flex", gap: 6, flexWrap: "wrap" }}>
            <ToggleBtn label="â™‚ ULN" on={show.shiwaniMaleUln}   onClick={() => toggle("shiwaniMaleUln")}   colorKey="shiwani" lineStyle="solid" />
            <ToggleBtn label="â™€ ULN" on={show.shiwaniFemaleUln} onClick={() => toggle("shiwaniFemaleUln")} colorKey="shiwani" lineStyle="dashed" />
            <ToggleBtn label="Â± Mean lines" on={show.shiwaniMean} onClick={() => toggle("shiwaniMean")} colorKey="shiwani" lineStyle="dashed" />
          </div>
        </div>

        {/* HCM */}
        <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
          <div style={{ fontSize: 9.5, fontWeight: 600, textTransform: "uppercase",
            letterSpacing: "1px", color: C.muted, fontFamily: "'DM Mono', monospace" }}>
            Threshold
          </div>
          <ToggleBtn label="HCM â‰¥15mm" on={show.hcm} onClick={() => toggle("hcm")} colorKey="hcm" lineStyle="solid" />
        </div>
      </div>

      {/* â”€â”€ Chart â”€â”€ */}
      <div style={{
        background: C.surface, border: `1px solid ${C.border}`,
        borderRadius: 12, padding: "20px 8px 8px 8px"
      }}>
        <ResponsiveContainer width="100%" height={520}>
          <ComposedChart
            margin={{ top: 10, right: 40, bottom: 40, left: 20 }}
            data={[]}
          >
            <CartesianGrid strokeDasharray="3 3" stroke="#21262d" />
            <XAxis
              dataKey="bsa" type="number" domain={[0, 2.8]}
              tickCount={8} tickFormatter={v => v.toFixed(1)}
              label={{ value: "Body Surface Area (mÂ²)", position: "insideBottom", offset: -15,
                       style: { fontSize: 12, fill: C.muted } }}
              stroke={C.border} tick={{ fill: C.muted, fontSize: 11, fontFamily: "'DM Mono', monospace" }}
            />
            <YAxis
              type="number" domain={[0, 22]}
              label={{ value: "IVS Thickness (mm)", angle: -90, position: "insideLeft", offset: 10,
                       style: { fontSize: 12, fill: C.muted } }}
              stroke={C.border} tick={{ fill: C.muted, fontSize: 11, fontFamily: "'DM Mono', monospace" }}
            />
            <Tooltip content={<CustomTooltip />} />

            {/* HCM threshold */}
            {show.hcm && (
              <ReferenceLine y={15} stroke={C.hcm} strokeDasharray="6 3" strokeWidth={1.5}
                label={{ value: "HCM â‰¥15mm", position: "insideTopLeft",
                         style: { fill: C.hcm, fontSize: 11, fontFamily: "'DM Mono', monospace" } }} />
            )}

            {/* PHN Male â€” rendered as dots via Line with no stroke */}
            {show.male && (
              <Line
                data={males} dataKey="ivs" name="PHN Male"
                stroke="none" strokeWidth={0}
                dot={{ r: 3, fill: `${C.male}88`, strokeWidth: 0 }}
                activeDot={{ r: 4, fill: C.male, strokeWidth: 0 }}
                isAnimationActive={false}
                legendType="circle"
              />
            )}

            {/* PHN Female â€” rendered as dots via Line with no stroke */}
            {show.female && (
              <Line
                data={females} dataKey="ivs" name="PHN Female"
                stroke="none" strokeWidth={0}
                dot={{ r: 3, fill: `${C.female}88`, strokeWidth: 0 }}
                activeDot={{ r: 4, fill: C.female, strokeWidth: 0 }}
                isAnimationActive={false}
                legendType="circle"
              />
            )}

            {/* MESA Male ULN â€” solid */}
            {show.mesaMale && (
              <Line data={REF_DATA} dataKey="mesaMale" name="MESA â™‚ ULN"
                stroke={C.mesa} strokeWidth={2}
                dot={false} activeDot={{ r: 0, strokeWidth: 0 }} isAnimationActive={false} />
            )}

            {/* MESA Female ULN â€” dashed */}
            {show.mesaFemale && (
              <Line data={REF_DATA} dataKey="mesaFemale" name="MESA â™€ ULN"
                stroke={C.mesa} strokeWidth={2} strokeDasharray="6 4"
                dot={false} activeDot={{ r: 0, strokeWidth: 0 }} isAnimationActive={false} />
            )}

            {/* Shiwani Male ULN â€” solid */}
            {show.shiwaniMaleUln && (
              <Line data={REF_DATA} dataKey="mUln" name="Shiwani â™‚ ULN"
                stroke={C.shiwani} strokeWidth={2.5} connectNulls={false}
                dot={false} activeDot={{ r: 0, strokeWidth: 0 }} isAnimationActive={false} />
            )}

            {/* Shiwani Female ULN â€” dashed */}
            {show.shiwaniFemaleUln && (
              <Line data={REF_DATA} dataKey="fUln" name="Shiwani â™€ ULN"
                stroke={C.shiwani} strokeWidth={2.5} strokeDasharray="6 4" connectNulls={false}
                dot={false} activeDot={{ r: 0, strokeWidth: 0 }} isAnimationActive={false} />
            )}

            {/* Shiwani Mean lines */}
            {show.shiwaniMean && (
              <Line data={REF_DATA} dataKey="mMean" name="Shiwani â™‚ Mean"
                stroke={C.shiwani} strokeWidth={1.5} strokeOpacity={0.55} connectNulls={false}
                dot={false} activeDot={{ r: 0, strokeWidth: 0 }} isAnimationActive={false} />
            )}
            {show.shiwaniMean && (
              <Line data={REF_DATA} dataKey="fMean" name="Shiwani â™€ Mean"
                stroke={C.shiwani} strokeWidth={1.5} strokeDasharray="6 4" strokeOpacity={0.55} connectNulls={false}
                dot={false} activeDot={{ r: 0, strokeWidth: 0 }} isAnimationActive={false} />
            )}

          </ComposedChart>
        </ResponsiveContainer>
      </div>

      {/* â”€â”€ Callout cards â”€â”€ */}
      <div style={{
        display: "grid", gridTemplateColumns: "repeat(3, 1fr)",
        gap: 10, marginTop: 14
      }}>
        {[
          {
            label: "The MESA Paradox",
            color: C.mesa,
            value: "â™€ ULN > â™‚",
            sub: "Ratiometric index places female threshold above male â€” counterintuitive and clinically problematic"
          },
          {
            label: "Shiwani Correction",
            color: C.shiwani,
            value: "â™‚ ULN > â™€",
            sub: "GAMM multivariable model places male threshold above female across the full BSA range"
          },
          {
            label: "The Gap at avg â™‚ BSA 1.94",
            color: C.hcm,
            value: "16.1 vs 14.1 mm",
            sub: "MESA ratiometric ULN exceeds Shiwani GAMM by ~2mm at average male body size â€” clinically meaningful"
          }
        ].map(({ label, color, value, sub }) => (
          <div key={label} style={{
            background: C.surface, border: `1px solid ${C.border}`,
            borderRadius: 10, padding: "14px 16px"
          }}>
            <div style={{ fontSize: 9.5, fontWeight: 600, textTransform: "uppercase",
              letterSpacing: "0.8px", color: C.muted,
              fontFamily: "'DM Mono', monospace", marginBottom: 6 }}>
              {label}
            </div>
            <div style={{ fontSize: 20, fontWeight: 600, color,
              fontFamily: "'DM Mono', monospace", letterSpacing: "-0.3px" }}>
              {value}
            </div>
            <div style={{ fontSize: 12, color: C.muted, marginTop: 4, lineHeight: 1.55 }}>
              {sub}
            </div>
          </div>
        ))}
      </div>

      {/* â”€â”€ Methodology card â”€â”€ */}
      <div style={{
        marginTop: 10,
        background: C.surface, border: `1px solid ${C.border}`,
        borderRadius: 10, padding: "14px 16px",
        display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 16
      }}>
        <div style={{ fontSize: 9.5, fontWeight: 600, textTransform: "uppercase",
          letterSpacing: "0.8px", color: C.muted, fontFamily: "'DM Mono', monospace",
          marginBottom: 6, gridColumn: "1 / -1" }}>
          âš  Methodological Note â€” Scatter vs Reference Lines
        </div>
        {[
          {
            icon: "ðŸ‘¶",
            label: "Age",
            text: "PHN scatter is pediatric (â‰¤18y). Shiwani reference is age 55 adults. Younger hearts may be thinner â€” scatter sitting below the green lines is expected."
          },
          {
            icon: "ðŸ”¬",
            label: "Modality",
            text: "PHN data is echocardiography. Shiwani used CMR, which may have better tissue resolution and no dropout."
          },
          {
            icon: "ðŸ“",
            label: "Measurement",
            text: "PHN measures IVS at a fixed parasternal long-axis location. Shiwani's 'maximal wall thickness' scans the entire LV â€” not always the IVS."
          }
        ].map(({ icon, label, text }) => (
          <div key={label}>
            <div style={{ fontSize: 12, fontWeight: 600, color: C.text, marginBottom: 4 }}>
              {icon} {label}
            </div>
            <div style={{ fontSize: 12, color: C.muted, lineHeight: 1.6 }}>
              {text}
            </div>
          </div>
        ))}
      </div>

      {/* â”€â”€ Sources â”€â”€ */}
      <div style={{
        marginTop: 10,
        background: C.surface, border: `1px solid ${C.border}`,
        borderRadius: 10, padding: "14px 16px",
      }}>
        <div style={{ fontSize: 9.5, fontWeight: 600, textTransform: "uppercase",
          letterSpacing: "0.8px", color: C.muted, fontFamily: "'DM Mono', monospace",
          marginBottom: 10 }}>
          Sources
        </div>
        <div style={{ display: "grid", gridTemplateColumns: "repeat(2, 1fr)", gap: "6px 24px" }}>
          {[
            {
              tag: "MESA",
              color: C.mesa,
              text: "Strom et al. Reference Values for Indexed Echocardiographic Chamber Sizes in Older Adults. J Am Heart Assoc. 2024;13:e034029.",
              href: "https://www.ahajournals.org/doi/10.1161/JAHA.123.034029"
            },
            {
              tag: "PHN",
              color: C.male,
              text: "Lopez et al., Relationship of Echocardiographic Z Scores Adjusted for Body Surface Area to Age, Sex, Race, and Ethnicity. Circ Cardiovasc Imaging. 2017.",
              href: "https://www.ahajournals.org/doi/10.1161/CIRCIMAGING.117.006979"
            },
            {
              tag: "Shiwani",
              color: C.shiwani,
              text: "Shiwani et al. Demographic-Based Personalized Left Ventricular Hypertrophy Thresholds. J Am Coll Cardiol. 2025;85(7):685â€“695.",
              href: "https://www.jacc.org/doi/10.1016/j.jacc.2024.10.082"
            },
            {
              tag: "Calculator",
              color: C.shiwani,
              text: "Shiwani et al. online HCM/LVH threshold calculator. Shiwani values sampled at 5cm height increments (BMI=24, age=55) via this tool.",
              href: "https://hcmcalculator.com/"
            },
          ].map(({ tag, color, text, href }) => (
            <div key={tag} style={{ display: "flex", gap: 8, alignItems: "flex-start" }}>
              <span style={{
                fontSize: 9, fontWeight: 700, fontFamily: "'DM Mono', monospace",
                color, background: `${color}22`, border: `1px solid ${color}55`,
                borderRadius: 4, padding: "1px 6px", whiteSpace: "nowrap", marginTop: 1
              }}>
                {tag}
              </span>
              <span style={{ fontSize: 11, color: C.muted, lineHeight: 1.6 }}>
                {text}{" "}
                <a href={href} target="_blank" rel="noopener noreferrer"
                  style={{ color: C.muted, textDecoration: "underline", textDecorationColor: "#484f58" }}>
                  â†— link
                </a>
              </span>
            </div>
          ))}
        </div>
      </div>

      {/* â”€â”€ Footer â”€â”€ */}
      <div style={{
        marginTop: 20, paddingTop: 16,
        borderTop: `1px solid ${C.border}`,
        display: "flex", justifyContent: "space-between", alignItems: "center",
        flexWrap: "wrap", gap: 8
      }}>
        <div style={{ fontFamily: "'DM Mono', monospace", fontSize: 11, color: C.muted, lineHeight: 1.8 }}>
          <span style={{ color: C.text, fontWeight: 500 }}>Dan Dyar</span>
          <span style={{ color: "#484f58" }}> Â· MA, ACS, RDCS, FASE Â· 2026</span>
        </div>
        <a href="https://www.linkedin.com/in/dan-dyar-ma-acs-rdcs-ae-pe-fe-fase/"
          target="_blank" rel="noopener noreferrer"
          style={{
            fontFamily: "'DM Mono', monospace", fontSize: 11,
            color: C.muted, textDecoration: "none",
            display: "flex", alignItems: "center", gap: 5,
          }}>
          <svg width="14" height="14" viewBox="0 0 24 24" fill={C.muted}>
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
          LinkedIn
        </a>
      </div>
    </div>
  );
}

// â”€â”€ Bootstrap â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
fetch("phn_ivs_data.json")
  .then(r => r.json())
  .then(data => {
    ReactDOM.render(<App data={data} />, document.getElementById("root"));
  })
  .catch(() => {
    document.getElementById("root").innerHTML = `
      <div style="display:flex;align-items:center;justify-content:center;height:60vh;
        font-family:'DM Mono',monospace;color:#ff7b72;font-size:13px;
        flex-direction:column;gap:12px;">
        <div>âš  Could not load phn_ivs_data.json</div>
        <div style="color:#7d8590;font-size:11px;">
          Make sure phn_ivs_data.json is in the same folder as index.html.
        </div>
      </div>`;
  });
</script>
</body>
</html>